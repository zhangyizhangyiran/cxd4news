package com.cxd.cxd4android.global;import android.content.Context;import android.content.Intent;import android.graphics.Bitmap;import android.graphics.BitmapFactory;import android.view.View;import android.webkit.JavascriptInterface;import android.widget.Toast;import com.cxd.cxd4android.R;import com.cxd.cxd4android.activity.PdfShowActivity;import com.cxd.cxd4android.widget.share.CopyUtils;import com.cxd.cxd4android.widget.share.ShareContentCustomizeDemo;import com.google.gson.Gson;import org.json.JSONException;import org.json.JSONObject;import java.lang.reflect.Array;import java.util.ArrayList;import java.util.List;import cn.sharesdk.framework.ShareSDK;import cn.sharesdk.onekeyshare.OnekeyShare;/** * Created by wangxiaofa on 16/9/27. * Js调用android原生类 */public class JsInterface {    /*绑定object对象*/    private Context context;    public JsInterface(Context context) {        this.context = context;    }    /*    * Js调用android原生方法    * @JavascriptInterface必不可少    */    @JavascriptInterface    public void shareViewWithJsonString(String[] str) {        String title = str[0];        String content = str[1];        String imageUrl = str[2];        String h5Url = str[3];        showShare(title, content, imageUrl, h5Url);    }    @JavascriptInterface    public void showPdf() {        Intent PdfIntent=new Intent(context, PdfShowActivity.class);        PdfIntent.putExtra("PdfShowIntent", "showPdf");        context.startActivity(PdfIntent);    }    /**     * 弹出分享     *     * @param title     * @param content     * @param imageUrl     * @param h5Url     */    private void showShare(String title, String content, final String imageUrl, final String h5Url) {        ShareSDK.initSDK(context);        OnekeyShare oks = new OnekeyShare();        //关闭sso授权        oks.disableSSOWhenAuthorize();        // 分享时Notification的图标和文字  2.5.9以后的版本不调用此方法        //oks.setNotification(R.drawable.ic_launcher, getString(R.string.app_name));        // title标题，印象笔记、邮箱、信息、微信、人人网和QQ空间使用        oks.setTitle(title);        // titleUrl是标题的网络链接，仅在人人网和QQ空间使用        oks.setTitleUrl(h5Url);        // text是分享文本，所有平台都需要这个字段        oks.setText(content  + "");//        // imagePath是图片的本地路径，Linked-In以外的平台都支持此参数        //oks.setImagePath("/sdcard/test.jpg");//确保SDcard下面存在此张图片        // h5Url仅在微信（包括好友和朋友圈）中使用        oks.setUrl(h5Url);        // comment是我对这条分享的评论，仅在人人网和QQ空间使用        oks.setComment("诚信贷理财产品真的很棒!");        // site是分享此内容的网站名称，仅在QQ空间使用        oks.setSite("诚信贷");        // siteUrl是分享此内容的网站地址，仅在QQ空间使用        oks.setSiteUrl(h5Url);//        oks.setImageData(BitmapFactory.decodeResource(getResources(), R.mipmap.ic_launcher));        // 参考代码配置章节，设置分享参数        //通过OneKeyShareCallback来修改不同平台分享的内容        oks.setShareContentCustomizeCallback(new ShareContentCustomizeDemo(context, content, imageUrl));//        oks.setFilePath("http://p4.so.qhimg.com/bdr/_240_/t0136bf73e425b527a4.jpg");//        oks.setImageUrl("http://p4.so.qhimg.com/bdr/_240_/t0136bf73e425b527a4.jpg");        // 启动分享GUI//        oks.show(getActivity());// 参考代码配置章节，设置分享参数// 构造一个图标        Bitmap enableLogo = BitmapFactory.decodeResource(context.getResources(), R.mipmap.ic_recom_copy);//        Bitmap disableLogo = BitmapFactory.decodeResource(context.getResources(), R.drawable.ssdk_oks_logo_qq);        String label = "复制链接";        View.OnClickListener listener = new View.OnClickListener() {            public void onClick(View v) {                CopyUtils.copy(h5Url, context);            }        };        oks.setCustomerLogo(enableLogo, label, listener);        oks.show(context);    }}